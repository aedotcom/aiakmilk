import{a8 as f,$ as d,j as e,G as a,S as u,X as g,T as l,a2 as b,a as v,a9 as k,L as y}from"./index-CFCKOFJc.js";import{A as w}from"./AuthWrapper-w7nt1XZO.js";import{F,c as z,a as A}from"./formik.esm-DKP50kiK.js";import{u as P}from"./useScriptRef-CzDTwxAm.js";import{I}from"./InputLabel-N5ZjE5T8.js";import{F as m}from"./FormHelperText-cXg8CqhS.js";import"./AuthBackground-DzoKTBTN.js";function L(){const o=P(),h=f(),{isLoggedIn:p,resetPassword:x}=d();return e.jsx(e.Fragment,{children:e.jsx(F,{initialValues:{email:"",submit:null},validationSchema:z().shape({email:A().email("Must be a valid email").max(255).required("Email is required")}),onSubmit:async(s,{setErrors:n,setStatus:r,setSubmitting:t})=>{try{await x(s.email).then(()=>{r({success:!0}),t(!1),k({open:!0,message:"Check mail for reset password link",variant:"alert",alert:{color:"success"}}),setTimeout(()=>{h(p?"/auth/check-mail":"/check-mail",{replace:!0})},1500)},i=>{r({success:!1}),n({submit:i.message}),t(!1)})}catch(i){console.error(i),o.current&&(r({success:!1}),n({submit:i.message}),t(!1))}},children:({errors:s,handleBlur:n,handleChange:r,handleSubmit:t,isSubmitting:i,touched:c,values:j})=>e.jsx("form",{noValidate:!0,onSubmit:t,children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsxs(a,{size:12,children:[e.jsxs(u,{sx:{gap:1},children:[e.jsx(I,{htmlFor:"email-forgot",children:"Email Address"}),e.jsx(g,{fullWidth:!0,error:!!(c.email&&s.email),id:"email-forgot",type:"email",value:j.email,name:"email",onBlur:n,onChange:r,placeholder:"Enter email address",inputProps:{}})]}),c.email&&s.email&&e.jsx(m,{error:!0,id:"helper-text-email-forgot",children:s.email})]}),s.submit&&e.jsx(a,{size:12,children:e.jsx(m,{error:!0,children:s.submit})}),e.jsx(a,{sx:{mb:-2},size:12,children:e.jsx(l,{variant:"caption",children:"Do not forgot to check SPAM box."})}),e.jsx(a,{size:12,children:e.jsx(b,{children:e.jsx(v,{disableElevation:!0,disabled:i,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Send Password Reset Email"})})})]})})})})}function $(){const{isLoggedIn:o}=d();return e.jsx(w,{children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{size:12,children:e.jsxs(u,{direction:"row",sx:{justifyContent:"space-between",alignItems:"baseline",mb:{xs:-.5,sm:.5}},children:[e.jsx(l,{variant:"h3",children:"Forgot Password"}),e.jsx(l,{component:y,to:o?"/auth/login":"/login",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"Back to Login"})]})}),e.jsx(a,{size:12,children:e.jsx(L,{})})]})})}export{$ as default};
