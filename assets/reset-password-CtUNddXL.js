import{a8 as I,$ as z,r as l,j as s,G as e,S as p,X as j,a0 as F,I as R,Z as A,B as C,T as m,a2 as k,a as W,a9 as q}from"./index-CFCKOFJc.js";import{A as T}from"./AuthWrapper-w7nt1XZO.js";import{F as D,c as L,a as g}from"./formik.esm-DKP50kiK.js";import{u as $}from"./useScriptRef-CzDTwxAm.js";import{s as G,a as M}from"./password-strength-_dbWWfI_.js";import{I as P}from"./InputLabel-N5ZjE5T8.js";import{E as V,a as H}from"./Eye-DVn-2GO7.js";import{F as u}from"./FormHelperText-cXg8CqhS.js";import"./AuthBackground-DzoKTBTN.js";function N(){const h=$(),b=I(),{isLoggedIn:y}=z(),[o,S]=l.useState(),[c,v]=l.useState(!1),B=()=>{v(!c)},E=r=>{r.preventDefault()},x=r=>{const a=G(r);S(M(a))};return l.useEffect(()=>{x("")},[]),s.jsx(s.Fragment,{children:s.jsx(D,{initialValues:{password:"",confirmPassword:"",submit:null},validationSchema:L().shape({password:g().max(255).required("Password is required"),confirmPassword:g().required("Confirm Password is required").test("confirmPassword","Both Password must be match!",(r,a)=>a.parent.password===r)}),onSubmit:async(r,{setErrors:a,setStatus:t,setSubmitting:n})=>{try{h.current&&(t({success:!0}),n(!1),q({open:!0,message:"Successfuly reset password.",variant:"alert",alert:{color:"success"}}),setTimeout(()=>{b(y?"/auth/login":"/login",{replace:!0})},1500))}catch(i){console.error(i),h.current&&(t({success:!1}),a({submit:i.message}),n(!1))}},children:({errors:r,handleBlur:a,handleChange:t,handleSubmit:n,isSubmitting:i,touched:d,values:w})=>s.jsx("form",{noValidate:!0,onSubmit:n,children:s.jsxs(e,{container:!0,spacing:3,children:[s.jsxs(e,{size:12,children:[s.jsxs(p,{sx:{gap:1},children:[s.jsx(P,{htmlFor:"password-reset",children:"Password"}),s.jsx(j,{fullWidth:!0,error:!!(d.password&&r.password),id:"password-reset",type:c?"text":"password",value:w.password,name:"password",onBlur:a,onChange:f=>{t(f),x(f.target.value)},endAdornment:s.jsx(F,{position:"end",children:s.jsx(R,{"aria-label":"toggle password visibility",onClick:B,onMouseDown:E,edge:"end",color:"secondary",children:c?s.jsx(V,{}):s.jsx(H,{})})}),placeholder:"Enter password"})]}),d.password&&r.password&&s.jsx(u,{error:!0,id:"helper-text-password-reset",children:r.password}),s.jsx(A,{fullWidth:!0,sx:{mt:2},children:s.jsxs(e,{container:!0,spacing:2,sx:{alignItems:"center"},children:[s.jsx(e,{children:s.jsx(C,{sx:{bgcolor:o==null?void 0:o.color,width:85,height:8,borderRadius:"7px"}})}),s.jsx(e,{children:s.jsx(m,{variant:"subtitle1",sx:{fontSize:"0.75rem"},children:o==null?void 0:o.label})})]})})]}),s.jsxs(e,{size:12,children:[s.jsxs(p,{sx:{gap:1},children:[s.jsx(P,{htmlFor:"confirm-password-reset",children:"Confirm Password"}),s.jsx(j,{fullWidth:!0,error:!!(d.confirmPassword&&r.confirmPassword),id:"confirm-password-reset",type:"password",value:w.confirmPassword,name:"confirmPassword",onBlur:a,onChange:t,placeholder:"Enter confirm password"})]}),d.confirmPassword&&r.confirmPassword&&s.jsx(u,{error:!0,id:"helper-text-confirm-password-reset",children:r.confirmPassword})]}),r.submit&&s.jsx(e,{size:12,children:s.jsx(u,{error:!0,children:r.submit})}),s.jsx(e,{size:12,children:s.jsx(k,{children:s.jsx(W,{disableElevation:!0,disabled:i,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Reset Password"})})})]})})})})}function ss(){return s.jsx(T,{children:s.jsxs(e,{container:!0,spacing:3,children:[s.jsx(e,{size:12,children:s.jsxs(p,{sx:{gap:1,mb:{xs:-.5,sm:.5}},children:[s.jsx(m,{variant:"h3",children:"Reset Password"}),s.jsx(m,{color:"secondary",children:"Please choose your new password"})]})}),s.jsx(e,{size:12,children:s.jsx(N,{})})]})})}export{ss as default};
