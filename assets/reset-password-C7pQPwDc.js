import{bD as B,bw as F,c,j as s,G as r,S as u,bv as j,bx as I,I as R,F as A,B as C,T as p,bz as k,a as W,bE as q}from"./index-B4r2VmdQ.js";import{A as D}from"./AuthWrapper-DsLPUGph.js";import{F as T,c as L,a as g}from"./formik.esm-CML5bJcM.js";import{u as G}from"./useScriptRef-Cwldc2FU.js";import{s as M,a as V}from"./password-strength-_dbWWfI_.js";import{I as P}from"./InputLabel-DoibUqKx.js";import{E as $,a as H}from"./Eye-1musJ8bg.js";import{F as l}from"./FormHelperText-BMdZsmyD.js";import"./AuthBackground-BXMWMUfU.js";function N(){const m=G(),b=B(),{isLoggedIn:v}=F(),[h,y]=c.useState(),[d,S]=c.useState(!1),E=()=>{S(!d)},z=e=>{e.preventDefault()},x=e=>{const o=M(e);y(V(o))};return c.useEffect(()=>{x("")},[]),s.jsx(s.Fragment,{children:s.jsx(T,{initialValues:{password:"",confirmPassword:"",submit:null},validationSchema:L().shape({password:g().max(255).required("Password is required"),confirmPassword:g().required("Confirm Password is required").test("confirmPassword","Both Password must be match!",(e,o)=>o.parent.password===e)}),onSubmit:async(e,{setErrors:o,setStatus:a,setSubmitting:t})=>{try{m.current&&(a({success:!0}),t(!1),q({open:!0,message:"Successfuly reset password.",variant:"alert",alert:{color:"success"}}),setTimeout(()=>{b(v?"/auth/login":"/login",{replace:!0})},1500))}catch(n){console.error(n),m.current&&(a({success:!1}),o({submit:n.message}),t(!1))}},children:({errors:e,handleBlur:o,handleChange:a,handleSubmit:t,isSubmitting:n,touched:i,values:w})=>s.jsx("form",{noValidate:!0,onSubmit:t,children:s.jsxs(r,{container:!0,spacing:3,children:[s.jsxs(r,{size:12,children:[s.jsxs(u,{sx:{gap:1},children:[s.jsx(P,{htmlFor:"password-reset",children:"Password"}),s.jsx(j,{fullWidth:!0,error:!!(i.password&&e.password),id:"password-reset",type:d?"text":"password",value:w.password,name:"password",onBlur:o,onChange:f=>{a(f),x(f.target.value)},endAdornment:s.jsx(I,{position:"end",children:s.jsx(R,{"aria-label":"toggle password visibility",onClick:E,onMouseDown:z,edge:"end",color:"secondary",children:d?s.jsx($,{}):s.jsx(H,{})})}),placeholder:"Enter password"})]}),i.password&&e.password&&s.jsx(l,{error:!0,id:"helper-text-password-reset",children:e.password}),s.jsx(A,{fullWidth:!0,sx:{mt:2},children:s.jsxs(r,{container:!0,spacing:2,sx:{alignItems:"center"},children:[s.jsx(r,{children:s.jsx(C,{sx:{bgcolor:h?.color,width:85,height:8,borderRadius:"7px"}})}),s.jsx(r,{children:s.jsx(p,{variant:"subtitle1",sx:{fontSize:"0.75rem"},children:h?.label})})]})})]}),s.jsxs(r,{size:12,children:[s.jsxs(u,{sx:{gap:1},children:[s.jsx(P,{htmlFor:"confirm-password-reset",children:"Confirm Password"}),s.jsx(j,{fullWidth:!0,error:!!(i.confirmPassword&&e.confirmPassword),id:"confirm-password-reset",type:"password",value:w.confirmPassword,name:"confirmPassword",onBlur:o,onChange:a,placeholder:"Enter confirm password"})]}),i.confirmPassword&&e.confirmPassword&&s.jsx(l,{error:!0,id:"helper-text-confirm-password-reset",children:e.confirmPassword})]}),e.submit&&s.jsx(r,{size:12,children:s.jsx(l,{error:!0,children:e.submit})}),s.jsx(r,{size:12,children:s.jsx(k,{children:s.jsx(W,{disableElevation:!0,disabled:n,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Reset Password"})})})]})})})})}function ss(){return s.jsx(D,{children:s.jsxs(r,{container:!0,spacing:3,children:[s.jsx(r,{size:12,children:s.jsxs(u,{sx:{gap:1,mb:{xs:-.5,sm:.5}},children:[s.jsx(p,{variant:"h3",children:"Reset Password"}),s.jsx(p,{color:"secondary",children:"Please choose your new password"})]})}),s.jsx(r,{size:12,children:s.jsx(N,{})})]})})}export{ss as default};
